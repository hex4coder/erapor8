import{_ as R}from"./AppSelect-BxtXAod9.js";import{_ as U}from"./AppTextField-B_x-gJGn.js";import{r as n,i as E,j as $,ay as q,Y as M,c as H,o as K,d as a,b as s,m as e,H as u,v as _,e as r,t as y,a0 as Y,a1 as z,F as G,ab as m,az as O}from"./main-DMixy-zA.js";import{u as x,m as J,a as Q}from"./misc-mask-light-C5pcHj9A.js";import{u as W}from"./useAbility-CfDEoVFc.js";import{$ as X}from"./api-DuTb8U9y.js";import{u as Z}from"./useApi-BFo9Fwth.js";import{c as ee}from"./createUrl-BGpqzwGy.js";import{a as d,V as I}from"./VRow-ldvFrort.js";import{V as te}from"./VImg-CVtU7sDy.js";import{V as se}from"./VCard-BL5sBgqt.js";import{V as C}from"./VCardText-COsGQpPl.js";import{V as ae}from"./VForm-BCeWGbGI.js";import{V as oe}from"./VCheckbox-BXAlrWTL.js";import"./VLabel-DOETztSO.js";import"./VTextField-CfJHctEe.js";import"./forwardRefs-DWGaNmQL.js";import"./VList-BOfJkaJ5.js";import"./VAvatar-Bum6FSQ0.js";import"./VDivider-DKUBYDqU.js";import"./VOverlay-BQWTyvUN.js";import"./VMenu-BKUDYSqT.js";import"./VSelectionControl-BwXkGpdj.js";import"./VChip-BAVWtWY4.js";import"./index-9rIf2CJL.js";/* empty css              */const re="/build/assets/auth-v2-login-illustration-bordered-dark-cDkPk8mY.png",le="/build/assets/auth-v2-login-illustration-bordered-light-CIHqcIVA.png",ie="/build/assets/auth-v2-login-illustration-dark-ClExSVqL.png",ne="/build/assets/auth-v2-login-illustration-light-C4sKfRS1.png",me={href:"javascript:void(0)"},ue={class:"auth-logo d-flex align-center gap-x-3"},de=["src"],pe={class:"auth-title"},ce={class:"position-relative bg-background w-100 me-0"},fe={class:"d-flex align-center justify-center w-100 h-100",style:{"padding-inline":"6.25rem"}},ge=["src"],he={class:"text-h2 mb-1"},_e=["src"],Ve={class:"d-flex align-center flex-wrap justify-space-between my-6"},Ge={__name:"login",async setup(ve){let p,V;const S=x(ne,ie,le,re,!0),L=x(Q,J),v=n(),o=n({email:"",password:"",semester_id:"",remember:!1}),b=E(),T=$(),A=W(),g=n({email:void 0,password:void 0});n(!1);const c=n(!1),D=async()=>{try{const i=await X("/auth/login",{method:"POST",body:{email:o.value.email,password:o.value.password,semester_id:o.value.semester_id},onResponseError({response:N}){g.value=N._data.errors}}),{accessToken:t,userData:f,sekolah:h,semester:l,userAbility:w,roles:F}=i;m("userAbilityRules").value=w,A.update(w),m("userData").value=f,m("accessToken").value=t,m("sekolah").value=h,m("semester").value=l,m("roles").value=F,await O(()=>{T.replace(b.query.to?String(b.query.to):"/")})}catch(i){console.error(i)}},j=()=>{var i;(i=v.value)==null||i.validate().then(({valid:t})=>{t&&D()})},{data:k,execute:be}=([p,V]=q(()=>Z(ee("/auth/semester"))),p=await p,V(),p),P=M(()=>k.value.semester),B=n(k.value.semester_id);return o.value.semester_id=B.value,(i,t)=>{const f=U,h=R;return K(),H(G,null,[a("a",me,[a("div",ue,[a("img",{src:e(u).app.logo,height:"24"},null,8,de),a("h1",pe,_(e(u).app.title),1)])]),s(I,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:r(()=>[s(d,{md:"8",class:"d-none d-md-flex"},{default:r(()=>[a("div",ce,[a("div",fe,[s(te,{"max-width":"613",src:e(S),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),a("img",{class:"auth-footer-mask flip-in-rtl",src:e(L),alt:"auth-footer-mask",height:"280",width:"100"},null,8,ge)])]),_:1}),s(d,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:r(()=>[s(se,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6"},{default:r(()=>[s(C,{class:"text-center"},{default:r(()=>[a("h1",he,[a("img",{src:e(u).app.logo,height:"28"},null,8,_e),y(" "+_(e(u).app.title),1)]),a("p",null,"Versi "+_(e(u).app.version),1),t[5]||(t[5]=a("p",{class:"mb-0"},"Silahkan login untuk dapat mengakses Aplikasi",-1))]),_:1}),s(C,null,{default:r(()=>[s(ae,{ref_key:"refVForm",ref:v,onSubmit:Y(j,["prevent"])},{default:r(()=>[s(I,null,{default:r(()=>[s(d,{cols:"12"},{default:r(()=>[s(f,{modelValue:e(o).email,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).email=l),"error-messages":e(g).email,autofocus:"",label:"Email",type:"email",placeholder:"Email/NUPTK/NISN"},null,8,["modelValue","error-messages"])]),_:1}),s(d,{cols:"12"},{default:r(()=>[s(f,{modelValue:e(o).password,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).password=l),"error-messages":e(g).password,label:"Password",placeholder:"············",type:e(c)?"text":"password",autocomplete:"password","append-inner-icon":e(c)?"tabler-eye-off":"tabler-eye","onClick:appendInner":t[2]||(t[2]=l=>c.value=!e(c))},null,8,["modelValue","error-messages","type","append-inner-icon"])]),_:1}),s(d,{cols:"12"},{default:r(()=>[s(h,{items:e(P),"item-title":"nama","item-value":"semester_id",label:"Tahun Pelajaran",modelValue:e(o).semester_id,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).semester_id=l),placeholder:"Select Item"},null,8,["items","modelValue"]),a("div",Ve,[s(oe,{modelValue:e(o).remember,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).remember=l),label:"Simpan Login"},null,8,["modelValue"]),t[6]||(t[6]=a("a",{class:"text-primary",href:"javascript:void(0)"}," Lupa Password? ",-1))]),s(z,{block:"",type:"submit"},{default:r(()=>t[7]||(t[7]=[y(" Login ")])),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{Ge as default};
