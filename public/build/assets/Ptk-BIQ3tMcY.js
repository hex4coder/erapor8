import{_ as H}from"./AlertDialog-BL-sqSwc.js";import{_ as J}from"./DialogCloseBtn-BYOqr6o2.js";import{_ as M}from"./TablePagination-BNpwymqA.js";import{_ as W}from"./AppTextField-D2LXjmv0.js";import{_ as O}from"./AppSelect-Dodmi1Ge.js";import{r as p,G as X,w as Y,f as Z,o as ee,e as l,b as e,d,m as o,a1 as V,v as P,a3 as $,a0 as le,t as T}from"./main-BmaFLECC.js";import{u as N}from"./useApi-aDZ_p2JA.js";import{c as U}from"./createUrl-CavU1t8i.js";import{d as A,a as S}from"./mixins-C1PpnV79.js";import{$ as ae}from"./api-CmLymv6O.js";import{V as D}from"./VCardText-D2uK2Y8d.js";import{V as te}from"./VSpacer-Bydwz-hc.js";import{V as w}from"./VDivider-BN4YXaja.js";import{V as se}from"./VDataTableServer-KjfSC0TB.js";import{V as oe}from"./VAvatar-DzKqRnSB.js";import{V as de}from"./VImg-60m1FPF8.js";import{V as ie}from"./VDialog-DE__mQip.js";import{V as ne}from"./VForm-DpvbJd19.js";import{V as B,a as re,b as ue}from"./VCard-DPBtMZW7.js";import{V as r,a as s}from"./VRow-C3UxGzeT.js";const me={class:"d-flex gap-2 align-center"},pe={class:"d-flex align-center flex-wrap gap-4"},fe={class:"d-flex align-center gap-x-4"},ge={class:"d-flex flex-column"},ce={class:"text-base"},_e={class:"text-sm"},Ie={__name:"Ptk",props:{data:{type:String,required:!0}},setup(L){const I=L,R=[{title:"Nama",key:"nama",sortable:!0},{title:"NIK",key:"nik",align:"center",sortable:!0},{title:"L/P",key:"jenis_kelamin",align:"center",sortable:!0},{title:"Tempat, Tanggal Lahir",key:"tempat_tanggal_lahir",sortable:!1},{title:"detil",key:"detil",align:"center",sortable:!1}],n=p({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"nama",sortbydesc:"ASC"}),x=p(!1),C=p([]),_=p(0),j=m=>{var t,f;n.value.sortby=(t=m[0])==null?void 0:t.key,n.value.sortbydesc=(f=m[0])==null?void 0:f.order},y=async()=>{x.value=!0;try{let t=(await N(U("/referensi/ptk",{query:{jenis_gtk:I.data,sekolah_id:A.sekolah_id,semester_id:S.semester_id,periode_aktif:S.nama,q:n.value.searchQuery,page:n.value.page,per_page:n.value.itemsPerPage,sortby:n.value.sortby,sortbydesc:n.value.sortbydesc}}))).data.value;C.value=t.data.data,_.value=t.data.total}catch(m){console.error(m)}finally{x.value=!1}};X(async()=>{await y()}),Y(n,async()=>{await y()},{deep:!0});const g=p(!1),b=p(!1),v=p({color:null,title:null,text:null}),h=p([]),K=p(""),u=p({}),c=p({guru_id:null,gelar_depan:null,gelar_belakang:null,sekolah_id:A.sekolah_id}),G=async m=>{c.value.guru_id=m,h.value[m]=!0;try{let f=(await N(U(`/referensi/ptk/detil/${m}`))).data.value;K.value=`Detil PTK (${f.ptk.nama_lengkap})`,c.value.gelar_depan=f.ptk.gelar_depan,c.value.gelar_belakang=f.ptk.gelar_belakang}catch(t){console.error(t)}finally{h.value[m]=!1,g.value=!0}},q=async()=>{await ae("/referensi/ptk/update",{method:"POST",body:c.value,onResponse({request:m,response:t,options:f}){let i=t._data;g.value=!1,v.value=i,b.value=!0}})},Q=async()=>{await y()};return(m,t)=>{const f=O,i=W,z=M,F=J,E=H;return ee(),Z(B,null,{default:l(()=>[e(D,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[d("div",me,[e(f,{modelValue:o(n).itemsPerPage,"onUpdate:modelValue":t[0]||(t[0]=a=>o(n).itemsPerPage=a),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"15.5rem"}},null,8,["modelValue"])]),e(te),d("div",pe,[e(i,{modelValue:o(n).searchQuery,"onUpdate:modelValue":t[1]||(t[1]=a=>o(n).searchQuery=a),placeholder:"Cari data",style:{"inline-size":"15.625rem"}},null,8,["modelValue"])])]),_:1}),e(w),e(se,{page:o(n).page,"onUpdate:page":t[3]||(t[3]=a=>o(n).page=a),"items-per-page":o(n).itemsPerPage,"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"}],items:o(C),"server-items-length":o(_),"items-length":o(_),headers:R,"items-per-page-text":"Item",class:"text-no-wrap",options:o(n),loading:o(x),"loading-text":"Loading...","onUpdate:sortBy":j},{"item.nama":l(({item:a})=>[d("div",fe,[e(oe,{size:"34",variant:a.photo?void 0:"tonal",color:a.photo?void 0:"success"},{default:l(()=>[e(de,{src:a.photo},null,8,["src"])]),_:2},1032,["variant","color"]),d("div",ge,[d("h6",ce,P(a.nama_lengkap),1),d("div",_e,P(a.email),1)])])]),"item.detil":l(({item:a})=>[e(V,{loading:o(h)[a.guru_id],disabled:o(h)[a.guru_id],color:"warning",icon:"tabler-eye",onClick:k=>G(a.guru_id)},null,8,["loading","disabled","onClick"])]),bottom:l(()=>[e(z,{page:o(n).page,"onUpdate:page":t[2]||(t[2]=a=>o(n).page=a),"items-per-page":o(n).itemsPerPage,"total-items":o(_)},null,8,["page","items-per-page","total-items"])]),_:1},8,["page","items-per-page","items","server-items-length","items-length","options","loading"]),e(ie,{modelValue:o(g),"onUpdate:modelValue":t[8]||(t[8]=a=>$(g)?g.value=a:null),width:"700",scrollable:"","content-class":"scrollable-dialog"},{default:l(()=>[e(F,{onClick:t[4]||(t[4]=a=>g.value=!o(g))}),e(ne,{onSubmit:le(q,["prevent"])},{default:l(()=>[e(B,null,{default:l(()=>[e(re,{class:"pb-5"},{default:l(()=>[e(ue,null,{default:l(()=>[T(P(o(K)),1)]),_:1})]),_:1}),e(w),e(D,null,{default:l(()=>[e(r,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[10]||(t[10]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nama"},"Nama Lengkap",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.nama_lengkap,placeholder:"Nama Lengkap","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[11]||(t[11]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"gelar_depan"},"Gelar Depan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>[e(i,{id:"gelar_depan",modelValue:o(c).gelar_depan,"onUpdate:modelValue":t[5]||(t[5]=a=>o(c).gelar_depan=a),placeholder:"Gelar Depan","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[12]||(t[12]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"gelar_belakang"},"Gelar Belakang",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>[e(i,{id:"gelar_belakang",modelValue:o(c).gelar_belakang,"onUpdate:modelValue":t[6]||(t[6]=a=>o(c).gelar_belakang=a),placeholder:"Gelar Belakang","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[13]||(t[13]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nuptk"},"NUPTK",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.nuptk,placeholder:"NUPTK","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[14]||(t[14]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nip"},"NIP",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.nip,placeholder:"NIP","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[15]||(t[15]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"nik"},"NIK",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.nik,placeholder:"NIK","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[16]||(t[16]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"jenis_kelamin"},"Jenis Kelamin",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.jenis_kelamin_str,placeholder:"Jenis Kelamin","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[17]||(t[17]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"tempat_lahir"},"Tempat Lahir",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.tempat_lahir,placeholder:"Tempat Lahir","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[18]||(t[18]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"tanggal_lahir_indo"},"Tanggal Lahir",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.tanggal_lahir_indo,placeholder:"Tanggal Lahir","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[19]||(t[19]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"agama_id"},"Agama",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a,k;return[e(i,{id:"nama",value:(k=(a=o(u))==null?void 0:a.agama)==null?void 0:k.nama,placeholder:"Agama","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[20]||(t[20]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"alamat"},"Alamat",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.alamat,placeholder:"Alamat","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[21]||(t[21]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"rt"},"RT",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.rt,placeholder:"RT","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[22]||(t[22]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"rw"},"RW",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.rw,placeholder:"RW","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[23]||(t[23]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"desa_kelurahan"},"Desa/Kelurahan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.desa_kelurahan,placeholder:"Desa/Kelurahan","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[24]||(t[24]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"kecamatan"},"Kecamatan",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.kecamatan,placeholder:"Kecamatan","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[25]||(t[25]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"kode_pos"},"Kodepos",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.kode_pos,placeholder:"Kodepos","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[26]||(t[26]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"no_hp"},"Telp/HP",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.no_hp,placeholder:"Telp/HP","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1}),e(s,{cols:"12"},{default:l(()=>[e(r,{"no-gutters":""},{default:l(()=>[e(s,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>t[27]||(t[27]=[d("label",{class:"v-label text-body-2 text-high-emphasis",for:"email"},"Email",-1)])),_:1}),e(s,{cols:"12",md:"9"},{default:l(()=>{var a;return[e(i,{id:"nama",value:(a=o(u))==null?void 0:a.email,placeholder:"Email","persistent-placeholder":"",disabled:""},null,8,["value"])]}),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(w),e(D,{class:"d-flex justify-end flex-wrap gap-3 pt-5 overflow-visible"},{default:l(()=>[e(V,{color:"secondary",variant:"tonal",onClick:t[7]||(t[7]=a=>g.value=!1)},{default:l(()=>t[28]||(t[28]=[T(" Tutup ")])),_:1}),e(V,{type:"submit"},{default:l(()=>t[29]||(t[29]=[T(" Perbaharui ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(E,{isDialogVisible:o(b),"onUpdate:isDialogVisible":t[9]||(t[9]=a=>$(b)?b.value=a:null),"confirm-color":o(v).color,"confirm-title":o(v).title,"confirm-msg":o(v).text,onConfirm:Q},null,8,["isDialogVisible","confirm-color","confirm-title","confirm-msg"])]),_:1})}}};export{Ie as _};
