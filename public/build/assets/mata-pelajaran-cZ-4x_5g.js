import{_ as b}from"./TablePagination-BDZBnmVE.js";import{_ as P}from"./AppTextField-tDHVpi2X.js";import{_ as x}from"./AppSelect-B6kVya1c.js";import{u as h,c as w}from"./createUrl-6Hzj26A5.js";import{d as C,a as k}from"./mixins-BgPN6cCF.js";import{V as D,a as T,c as j,b as Q}from"./VCard-DCx1DrRW.js";import{V as c}from"./VDivider-C5OreANJ.js";import{V as U,a as f}from"./VRow-BLLMY4v2.js";import{V as $}from"./VDataTableServer-BeaH8WXD.js";import{r as i,G as A,w as _,c as B,b as t,e as r,o as M,t as S,m as s}from"./main-ClwCJtZx.js";import"./VLabel-BsYizg1c.js";import"./VImg-D4JLPoPV.js";import"./forwardRefs-DWGaNmQL.js";import"./VSelect-B4TifImM.js";import"./VList-B-rateA8.js";import"./VAvatar-D-RJn4dg.js";import"./VOverlay-Bg9QfGMR.js";import"./VMenu-Dsqtt64k.js";import"./VSelectionControl-CRIzob9U.js";import"./VChip-CrWI5Xs6.js";import"./index-BxkgbwWS.js";/* empty css              */import"./VTable-DopOYhGA.js";import"./filter-C3paAYm1.js";const ie={__name:"mata-pelajaran",setup(N){const e=i({page:1,itemsPerPage:10,searchQuery:"",selectedRole:null,sortby:"mata_pelajaran_id",sortbydesc:"ASC"}),g=[{title:"ID Mapel",key:"mata_pelajaran_id"},{title:"Nama Mata Pelajaran",key:"nama"}],d=i([]),n=i(0),p=i(!1);A(async()=>{await u()}),_(e,async()=>{await u()},{deep:!0}),_(()=>e.value.searchQuery,()=>{e.value.page=1});const y=o=>{var a,m;e.value.sortby=(a=o[0])==null?void 0:a.key,e.value.sortbydesc=(m=o[0])==null?void 0:m.order},u=async()=>{p.value=!0;try{let a=(await h(w("/referensi/mata-pelajaran",{query:{sekolah_id:C.sekolah_id,semester_id:k.semester_id,q:e.value.searchQuery,page:e.value.page,per_page:e.value.itemsPerPage,sortby:e.value.sortby,sortbydesc:e.value.sortbydesc}}))).data;d.value=a.value.data.data,n.value=a.value.data.total}catch(o){console.error(o)}finally{p.value=!1}};return(o,a)=>{const m=x,v=P,V=b;return M(),B("section",null,[t(D,{class:"mb-6"},{default:r(()=>[t(T,{class:"pb-4"},{default:r(()=>[t(j,null,{default:r(()=>a[3]||(a[3]=[S("Data Mata Pelajaran")])),_:1})]),_:1}),t(c),t(Q,null,{default:r(()=>[t(U,null,{default:r(()=>[t(f,{cols:"12",md:"4",class:"d-flex align-items-center"},{default:r(()=>[t(m,{modelValue:s(e).itemsPerPage,"onUpdate:modelValue":a[0]||(a[0]=l=>s(e).itemsPerPage=l),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),t(f,{cols:"12",md:"4","offset-md":"4",class:"d-flex gap-4"},{default:r(()=>[t(v,{modelValue:s(e).searchQuery,"onUpdate:modelValue":a[1]||(a[1]=l=>s(e).searchQuery=l),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(c),t($,{class:"text-no-wrap",items:s(d),"server-items-length":s(n),headers:g,options:s(e),loading:s(p),"loading-text":"Loading...","onUpdate:sortBy":y},{bottom:r(()=>[t(V,{page:s(e).page,"onUpdate:page":a[2]||(a[2]=l=>s(e).page=l),"items-per-page":s(e).itemsPerPage,"total-items":s(n)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1})])}}};export{ie as default};
