import{_ as I}from"./ConfirmDialog-CcInj2Pc.js";import{_ as O}from"./DetilNilaiDialog-BrVJAoYt.js";import{_ as H}from"./TablePagination-FNOB8vlu.js";import{_ as K}from"./AppTextField-Dp5kBFt0.js";import{_ as W}from"./AppAutocomplete-EZHdJUxx.js";import{_ as X}from"./AppSelect-DXPJaiyi.js";import{d as j,a as U}from"./mixins-uBP5IrUC.js";import{u as Y,c as Z}from"./createUrl-DnOFY2U5.js";import{$ as aa}from"./api-by5pjXog.js";import{V as ea,a as ta,c as la,b as ia}from"./VCard-DRJUbRMI.js";import{V as oa}from"./VDivider-aJCy8NmP.js";import{V as sa,a as y}from"./VRow-BQSu_8KF.js";import{V as ra}from"./VDataTableServer-BcPh4iMX.js";import{r as l,G as na,w as A,c as ma,b as o,e as n,m as a,a2 as k,F as da,o as ua,t as h,aa as pa}from"./main-BpG7sd3O.js";import"./VDialog-DB-2YWzx.js";import"./VOverlay-UGyez4kV.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-CYqdg6jD.js";import"./VImg-Bl-XSNRi.js";import"./AlertDialog-DdzUwxg7.js";import"./DialogCloseBtn-CR6Xfu4X.js";import"./VTable-kMkm9pyT.js";import"./VLabel-C8w7s4c-.js";/* empty css                   */import"./VField-DYo3wbI9.js";import"./VSelect-BRwbY4zJ.js";import"./VList-CIgg_wWF.js";import"./ssrBoot-CLT_sbo-.js";import"./VAvatar-27Btnc0h.js";import"./VMenu-D9nk4D3H.js";import"./VSelectionControl-DL5TTS5A.js";import"./VChip-B62mD0gT.js";import"./VSlideGroup-mIMP-21g.js";import"./filter-DOPVr7xd.js";import"./index-BxkgbwWS.js";/* empty css              */const Xa={__name:"penilaian",setup(_a){const t=l({itemsPerPage:10,searchQuery:null,page:1,sortby:"updated_at",sortbydesc:"DESC",rombongan_belajar_id:null}),M=s=>{var e,r;t.value.sortby=(e=s[0])==null?void 0:e.key,t.value.sortbydesc=(r=s[0])==null?void 0:r.order},D=l([]),P=l([]),b=l(0),c=l(!1),R=[{key:"rombel",title:"Rombel",sortable:!1},{key:"nama_mata_pelajaran",title:"Mata Pelajaran",sortable:!1},{key:"guru",title:"Guru Mata Pelajaran",sortable:!1},{key:"pd_count",title:"JML PD",sortable:!1,align:"center"},{key:"pd_dinilai",title:"JML PD Dinilai",sortable:!1,align:"center"},{key:"actions",title:"Detil",sortable:!1,align:"center"}];na(async()=>{await f()}),A(t,async()=>{await f()},{deep:!0}),A(()=>t.value.searchQuery,()=>{t.value.page=1});const m=l({user_id:j.user_id,guru_id:j.guru_id,sekolah_id:j.sekolah_id,semester_id:U.semester_id,periode_aktif:U.nama,data:"nilai-akademik"}),f=async()=>{c.value=!0;try{let e=(await Y(Z("/monitoring",{query:{user_id:m.value.user_id,guru_id:m.value.guru_id,sekolah_id:m.value.sekolah_id,semester_id:m.value.semester_id,periode_aktif:m.value.nama,data:m.value.data,q:t.value.searchQuery,page:t.value.page,per_page:t.value.itemsPerPage,sortby:t.value.sortby,sortbydesc:t.value.sortbydesc,rombongan_belajar_id:t.value.rombongan_belajar_id}}))).data.value;P.value=e.data,b.value=e.total,D.value=e.rombel}catch(s){console.error(s)}finally{c.value=!1}},d=l([]),u=l(!1),x=l([]),C=l(),B=l(),w=l([]),$=l(!1),N=l(!1),g=l(0),v=l(!1),p=l(!1),_=l({color:null,title:null,text:null}),F=l(""),V=l({pembelajaran_id:null,rombongan_belajar_id:null}),Q=async s=>{V.value.pembelajaran_id=s.pembelajaran_id,V.value.rombongan_belajar_id=s.rombongan_belajar_id,T({pembelajaran_id:s.pembelajaran_id,rombongan_belajar_id:s.rombongan_belajar_id})},T=async s=>{d.value[s.pembelajaran_id]=!0,await aa("/dashboard/detil-penilaian",{method:"POST",body:{pembelajaran_id:s.pembelajaran_id,rombongan_belajar_id:s.rombongan_belajar_id},onResponse({response:e}){let r=e._data;d.value[s.pembelajaran_id]=!1,u.value=!0,x.value=r.pembelajaran,C.value=`Detil Penilaian Mata Pelajaran ${r.pembelajaran.nama_mata_pelajaran}`,B.value=r.pembelajaran.induk,r.pembelajaran.mata_pelajaran_id==800001e3?g.value=1:g.value=r.pembelajaran.tema_count,w.value=r.data_siswa,$.value=r.merdeka,N.value=r.is_ppa}})},S=()=>{p.value=!1,setTimeout(()=>{_.value={color:"",title:"",text:""}},300),f()},q=()=>{T(V.value)};return(s,e)=>{const r=X,L=W,E=K,G=H,J=O,z=I;return ua(),ma(da,null,[o(ea,{class:"mb-6"},{default:n(()=>[o(ta,{class:"pb-4"},{default:n(()=>[o(la,null,{default:n(()=>e[7]||(e[7]=[h("Monitoring Â» Penilaian Akademik")])),_:1})]),_:1}),o(oa),o(ia,null,{default:n(()=>[o(sa,null,{default:n(()=>[o(y,{cols:"12",md:"4"},{default:n(()=>[o(r,{modelValue:a(t).itemsPerPage,"onUpdate:modelValue":e[0]||(e[0]=i=>a(t).itemsPerPage=i),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}]},null,8,["modelValue"])]),_:1}),o(y,{cols:"12",md:"4"},{default:n(()=>[o(L,{modelValue:a(t).rombongan_belajar_id,"onUpdate:modelValue":e[1]||(e[1]=i=>a(t).rombongan_belajar_id=i),items:a(D),placeholder:"== Filter Rombel ==","item-value":"rombongan_belajar_id","item-title":"nama",clearable:""},null,8,["modelValue","items"])]),_:1}),o(y,{cols:"12",md:"4"},{default:n(()=>[o(E,{modelValue:a(t).searchQuery,"onUpdate:modelValue":e[2]||(e[2]=i=>a(t).searchQuery=i),placeholder:"Cari Data"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(ra,{items:a(P),"server-items-length":a(b),headers:R,options:a(t),loading:a(c),"loading-text":"Loading...","onUpdate:sortBy":M},{"item.actions":n(({item:i})=>[o(pa,{size:"x-small",color:"success",onClick:ba=>Q(i),loading:a(d)[i.pembelajaran_id],disabled:a(d)[i.pembelajaran_id]},{default:n(()=>e[8]||(e[8]=[h(" Detil ")])),_:2},1032,["onClick","loading","disabled"])]),bottom:n(()=>[o(G,{page:a(t).page,"onUpdate:page":e[3]||(e[3]=i=>a(t).page=i),"items-per-page":a(t).itemsPerPage,"total-items":a(b)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items","server-items-length","options","loading"])]),_:1}),o(J,{isDialogVisible:a(u),"onUpdate:isDialogVisible":e[4]||(e[4]=i=>k(u)?u.value=i:null),"item-data":a(x),"title-detil-nilai":a(C),merdeka:a($),"is-ppa":a(N),"data-siswa":a(w),"sub-mapel":a(g),onRefresh:q},null,8,["isDialogVisible","item-data","title-detil-nilai","merdeka","is-ppa","data-siswa","sub-mapel"]),o(z,{isDialogVisible:a(v),"onUpdate:isDialogVisible":e[5]||(e[5]=i=>k(v)?v.value=i:null),isNotifVisible:a(p),"onUpdate:isNotifVisible":e[6]||(e[6]=i=>k(p)?p.value=i:null),"confirmation-question":"Apakah Anda yakin?","confirmation-text":a(F),"confirm-color":a(_).color,"confirm-title":a(_).title,"confirm-msg":a(_).text,onClose:S},null,8,["isDialogVisible","isNotifVisible","confirmation-text","confirm-color","confirm-title","confirm-msg"])],64)}}};export{Xa as default};
