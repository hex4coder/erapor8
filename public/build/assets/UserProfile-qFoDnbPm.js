import{b as P}from"./mixins-CCcJzSNR.js";import{C as B}from"./vue3-perfect-scrollbar-CcnrUBzs.js";import{a6 as w,a7 as A,a8 as C,b as t,a9 as x,aa as $,j as D,ab as a,f as m,l as R,m as l,o as r,e,t as u,v as p,c as f,F as _,h as g,d as T,ac as N,$ as E,q as F,a1 as S}from"./main-DMixy-zA.js";import{u as q}from"./useAbility-CfDEoVFc.js";import{$ as z}from"./api-DuTb8U9y.js";import{V as v}from"./VAvatar-Bum6FSQ0.js";import{V as b}from"./VImg-CVtU7sDy.js";import{V as j}from"./VMenu-BKUDYSqT.js";import{V as G,a as y,b as k,d as h}from"./VList-BOfJkaJ5.js";import{V}from"./VBadge-D-o0oGqJ.js";import{V as M}from"./VDivider-DKUBYDqU.js";import"./index-9rIf2CJL.js";import"./VOverlay-BQWTyvUN.js";import"./forwardRefs-DWGaNmQL.js";const U=A({start:Boolean,end:Boolean,...$(),...x()},"VListItemAction"),H=w()({name:"VListItemAction",props:U(),setup(n,d){let{slots:s}=d;return C(()=>t(n.tag,{class:["v-list-item-action",{"v-list-item-action--start":n.start,"v-list-item-action--end":n.end},n.class],style:n.style},s)),{}}}),J={class:"px-4 py-2"},ne={__name:"UserProfile",setup(n){D();const d=q(),s=a("userData"),I=async()=>{await z("/auth/logout",{method:"GET",async onResponse({request:i,response:c,options:o}){c._data,a("sekolah").value=null,a("semester").value=null,a("roles").value=null,a("accessToken").value=null,a("languages").value=null,a("userData").value=null,a("userAbilityRules").value=null,d.update([]),window.location.replace("/login")},onResponseError({response:i}){console.log(i._data.errors)}})},L=[{type:"divider"},{type:"navItem",icon:"tabler-user",title:"Profile",to:{name:"profile"}},{type:"divider"}];return(i,c)=>l(s)?(r(),m(V,{key:0,dot:"",location:"bottom right","offset-x":"3","offset-y":"3",bordered:"",color:"success"},{default:e(()=>[t(v,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:e(()=>[t(b,{src:l(s).profile_photo_path},null,8,["src"]),t(j,{activator:"parent",width:"230",location:"bottom end",offset:"14px"},{default:e(()=>[t(G,null,{default:e(()=>[t(y,null,{prepend:e(()=>[t(H,{start:""},{default:e(()=>[t(V,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:e(()=>[t(v,{color:"primary",variant:"tonal"},{default:e(()=>[t(b,{src:l(s).profile_photo_path},null,8,["src"])]),_:1})]),_:1})]),_:1})]),default:e(()=>[t(k,{class:"font-weight-semibold"},{default:e(()=>[u(p(l(s).name),1)]),_:1}),t(h,null,{default:e(()=>[u(p(l(s).email),1)]),_:1})]),_:1}),t(y,null,{default:e(()=>[(r(!0),f(_,null,g("$roles"in i?i.$roles:l(P),o=>(r(),m(h,{key:o},{default:e(()=>[u(p(o),1)]),_:2},1024))),128))]),_:1}),t(l(B),{options:{wheelPropagation:!1}},{default:e(()=>[(r(),f(_,null,g(L,o=>(r(),f(_,{key:o.title},[o.type==="navItem"?(r(),m(y,{key:0,to:o.to},N({prepend:e(()=>[t(E,{icon:o.icon,size:"22"},null,8,["icon"])]),default:e(()=>[t(k,null,{default:e(()=>[u(p(o.title),1)]),_:2},1024)]),_:2},[o.badgeProps?{name:"append",fn:e(()=>[t(V,F({rounded:"sm",class:"me-3",ref_for:!0},o.badgeProps),null,16)]),key:"0"}:void 0]),1032,["to"])):(r(),m(M,{key:1,class:"my-2"}))],64))),64)),T("div",J,[t(S,{block:"",size:"small",color:"error","append-icon":"tabler-logout",onClick:I},{default:e(()=>c[0]||(c[0]=[u(" Logout ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):R("",!0)}};export{ne as default};
