import{_ as y}from"./AppTextField-B_x-gJGn.js";import{ax as F,H as P,r as m,G as B,c as U,o as g,b as e,e as l,f as v,m as s,aw as C,a0 as S,d as u,a1 as D,t as E}from"./main-DMixy-zA.js";import{u as K}from"./useApi-BFo9Fwth.js";import{c as N}from"./createUrl-BGpqzwGy.js";import{$ as T}from"./api-DuTb8U9y.js";import{a as t,V as n}from"./VRow-ldvFrort.js";import{V as $}from"./VCard-BL5sBgqt.js";import{V as p}from"./VCardText-COsGQpPl.js";import{V as j}from"./VForm-BCeWGbGI.js";import{V as A}from"./VImg-CVtU7sDy.js";import{V as I}from"./VFileInput-CKmTkNyP.js";import"./VLabel-DOETztSO.js";import"./VTextField-CfJHctEe.js";import"./forwardRefs-DWGaNmQL.js";import"./index-9rIf2CJL.js";/* empty css              */import"./VAvatar-Bum6FSQ0.js";import"./VChip-BAVWtWY4.js";const se={__name:"profile",setup(M){F({title:`Profil Pengguna | ${P.app.title}`});const V=m(!0),_=m(),x=m(),o=m({name:null,email:null,password:null,confirm_password:null,photo:null});B(async()=>{await w()});const w=async()=>{try{let a=(await K(N("/auth/user"))).data.value;o.value.name=a.name,o.value.email=a.email,x.value=a.profile_photo_path}catch(r){console.error(r)}finally{V.value=!1}},h=()=>{var r;(r=_.value)==null||r.validate().then(({valid:a})=>{a&&k()})},f=m(!1),c=m(),k=async()=>{const r=new FormData;r.append("data","user"),r.append("photo",o.value.file?o.value.file:""),await T("/auth/user",{method:"POST",body:r,onResponse({request:a,response:d,options:i}){let b=d._data;f.value=!1,c.value=null,b.errors?(f.value=!0,c.value=b.message):isDialogVisible.value=!0}})};return(r,a)=>{const d=y;return g(),U("div",null,[e(n,null,{default:l(()=>[e(t,{cols:"12"},{default:l(()=>[e($,{title:"Informasi Profil Pengguna"},{append:l(()=>a[5]||(a[5]=[u("span",{class:"text-disabled text-subtitle-2"},"Perbaharui informasi profil dan alamat email akun Anda jika diperlukan.",-1)])),default:l(()=>[e(p),s(V)?(g(),v(p,{key:0,class:"text-center"},{default:l(()=>[e(C,{size:60,indeterminate:"",color:"error"})]),_:1})):(g(),v(p,{key:1},{default:l(()=>[e(j,{ref_key:"refVForm",ref:_,onSubmit:S(h,["prevent"])},{default:l(()=>[e(n,null,{default:l(()=>[e(t,{cols:"8"},{default:l(()=>[e(n,null,{default:l(()=>[e(t,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(t,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[6]||(a[6]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"name"},"Nama Lengkap",-1)])),_:1}),e(t,{cols:"12",md:"9"},{default:l(()=>[e(d,{id:"name",modelValue:s(o).name,"onUpdate:modelValue":a[0]||(a[0]=i=>s(o).name=i),placeholder:"Nama Lengkap","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(t,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(t,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[7]||(a[7]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"email"},"Email",-1)])),_:1}),e(t,{cols:"12",md:"9"},{default:l(()=>[e(d,{id:"email",type:"email",modelValue:s(o).email,"onUpdate:modelValue":a[1]||(a[1]=i=>s(o).email=i),placeholder:"Email","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(t,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(t,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[8]||(a[8]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"password"},"Kata Sandi Baru",-1)])),_:1}),e(t,{cols:"12",md:"9"},{default:l(()=>[e(d,{id:"password",type:"password",modelValue:s(o).password,"onUpdate:modelValue":a[2]||(a[2]=i=>s(o).password=i),placeholder:"Kosongkan jika tidak ingin mengganti kata sandi","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(t,{cols:"12"},{default:l(()=>[e(n,{"no-gutters":""},{default:l(()=>[e(t,{cols:"12",md:"3",class:"d-flex align-items-center"},{default:l(()=>a[9]||(a[9]=[u("label",{class:"v-label text-body-2 text-high-emphasis",for:"confirm_password"},"Konfirmasi Kata Sandi",-1)])),_:1}),e(t,{cols:"12",md:"9"},{default:l(()=>[e(d,{id:"confirm_password",type:"password",modelValue:s(o).confirm_password,"onUpdate:modelValue":a[3]||(a[3]=i=>s(o).confirm_password=i),placeholder:"Kosongkan jika tidak ingin mengganti kata sandi","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(t,{"offset-md":"3",cols:"12",md:"9",class:"d-flex gap-4"},{default:l(()=>[e(D,{type:"submit"},{default:l(()=>a[10]||(a[10]=[E(" Submit ")])),_:1})]),_:1})]),_:1})]),_:1}),e(t,{cols:"4",class:"text-center"},{default:l(()=>[e(A,{alt:s(o).name,src:s(x),cover:"",class:"mx-auto mb-10",width:"250px"},null,8,["alt","src"]),e(I,{modelValue:s(o).file,"onUpdate:modelValue":a[4]||(a[4]=i=>s(o).file=i),error:s(f),"error-messages":s(c),accept:"image/*",label:"Unggah Foto Profil"},null,8,["modelValue","error","error-messages"])]),_:1})]),_:1})]),_:1},512)]),_:1})),e(p)]),_:1})]),_:1})]),_:1})])}}};export{se as default};
