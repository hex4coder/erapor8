import{b as A,c as C}from"./mixins-C1PpnV79.js";import{C as $}from"./vue3-perfect-scrollbar-C-6oW1DX.js";import{u as x}from"./useAbility-DwY4ildr.js";import{a6 as D,a7 as T,a8 as E,b as t,a9 as N,aa as R,ab as a,r as F,ac as S,f as m,l as q,m as l,o as r,e,t as u,v as d,c as y,F as V,h as g,d as z,ad as G,$ as M,q as U,a1 as j}from"./main-BmaFLECC.js";import{$ as H}from"./api-CmLymv6O.js";import{V as b}from"./VAvatar-DzKqRnSB.js";import{V as k}from"./VImg-60m1FPF8.js";import{V as J}from"./VMenu-uYX0kftc.js";import{V as K,a as _,b as h,d as P}from"./VList--zc2cV7Y.js";import{V as v}from"./VBadge-XvvXSBQb.js";import{V as O}from"./VDivider-BN4YXaja.js";import"./index-9rIf2CJL.js";import"./VOverlay-DrobohEp.js";import"./forwardRefs-DWGaNmQL.js";const Q=T({start:Boolean,end:Boolean,...R(),...N()},"VListItemAction"),W=D()({name:"VListItemAction",props:Q(),setup(n,p){let{slots:i}=p;return E(()=>t(n.tag,{class:["v-list-item-action",{"v-list-item-action--start":n.start,"v-list-item-action--end":n.end},n.class],style:n.style},i)),{}}}),X={class:"px-4 py-2"},de={__name:"UserProfile",setup(n){const p=x(),i=a("userData"),I=S("erapor"),f=F(C),L=s=>{f.value=s};I.on(L);const B=async()=>{await H("/auth/logout",{method:"GET",async onResponse({request:s,response:c,options:o}){c._data,a("sekolah").value=null,a("semester").value=null,a("roles").value=null,a("accessToken").value=null,a("languages").value=null,a("userData").value=null,a("userAbilityRules").value=null,a("profilePhotoPath").value=null,p.update([]),window.location.replace("/login")},onResponseError({response:s}){console.log(s._data.errors)}})},w=[{type:"divider"},{type:"navItem",icon:"tabler-user",title:"Profile",to:{name:"profile"}},{type:"divider"}];return(s,c)=>l(i)?(r(),m(v,{key:0,dot:"",location:"bottom right","offset-x":"3","offset-y":"3",bordered:"",color:"success"},{default:e(()=>[t(b,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:e(()=>[t(k,{src:l(f)},null,8,["src"]),t(J,{activator:"parent",width:"230",location:"bottom end",offset:"14px"},{default:e(()=>[t(K,null,{default:e(()=>[t(_,null,{prepend:e(()=>[t(W,{start:""},{default:e(()=>[t(v,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:e(()=>[t(b,{color:"primary",variant:"tonal"},{default:e(()=>[t(k,{src:l(f)},null,8,["src"])]),_:1})]),_:1})]),_:1})]),default:e(()=>[t(h,{class:"font-weight-semibold"},{default:e(()=>[u(d(l(i).name),1)]),_:1}),t(P,null,{default:e(()=>[u(d(l(i).email),1)]),_:1})]),_:1}),t(_,null,{default:e(()=>[(r(!0),y(V,null,g("$roles"in s?s.$roles:l(A),o=>(r(),m(P,{key:o},{default:e(()=>[u(d(o),1)]),_:2},1024))),128))]),_:1}),t(l($),{options:{wheelPropagation:!1}},{default:e(()=>[(r(),y(V,null,g(w,o=>(r(),y(V,{key:o.title},[o.type==="navItem"?(r(),m(_,{key:0,to:o.to},G({prepend:e(()=>[t(M,{icon:o.icon,size:"22"},null,8,["icon"])]),default:e(()=>[t(h,null,{default:e(()=>[u(d(o.title),1)]),_:2},1024)]),_:2},[o.badgeProps?{name:"append",fn:e(()=>[t(v,U({rounded:"sm",class:"me-3",ref_for:!0},o.badgeProps),null,16)]),key:"0"}:void 0]),1032,["to"])):(r(),m(O,{key:1,class:"my-2"}))],64))),64)),z("div",X,[t(j,{block:"",size:"small",color:"error","append-icon":"tabler-logout",onClick:B},{default:e(()=>c[0]||(c[0]=[u(" Logout ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):q("",!0)}};export{de as default};
